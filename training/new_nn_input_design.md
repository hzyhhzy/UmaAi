# 新剧本神经网络输入设计（v2.0）

## 全局信息模块（总维度 850+）[对应JSON路径: global_info]

### 一、基础状态（120维）[对应JSON路径: global_info.base_status]
1. 角色基础属性（保留原有25维）[对应JSON路径: character.stats]
   - 体力/最大体力（2）→ vitality/max_vitality
   - 五维属性及上限（10）→ attributes.speed/power/stamina/guts/wisdom 及其 _max 后缀
   - 技能点数（2）→ skill_points/learned_skills_count
   - 动力等级（5）→ motivation_level (one-hot编码)
   - 正念/刷新状态（2）→ mindfulness_status/refresh_available
   - 种马系统（4）→ breeding_system.*

2. 回合信息（扩展至50维）
   - 当前回合编码（30）
   - 烹饪阶段标志（5）
   - 赛事阶段标志（15）

### 二、烹饪系统（300维）[对应JSON路径: cooking_system]
1. 食材系统（50）[对应JSON路径: ingredients]
   - 5种食材存量（5*3=15）→ inventory.[meat/vegetable/grain/dairy/spice]
   - 食材获取记录（10）→ acquisition_log[0-9]
   - 食材转换率（5）→ conversion_rates.*

2. 菜品系统（80）
   - 当前菜品类型（20 one-hot）
   - 菜品分数（5级分段）
   - 保底进度（3）
   - 菜品成功率（2）

3. 农场系统（120）
   - 5个农场等级（5*4=20）
   - 农场产量预测（5*3=15）
   - 收获历史（4*5=20）
   - 绿色收获标志（4）

4. 烹饪训练（50）
   - 8次训练材料类型（8*5=40）
   - 绿色训练成功率（8*1=8）

### 三、友人系统（150维）
1. 新型友人（100）
   - 友人类型（10）
   - 培养阶段（5级）
   - 外出次数（3）
   - 阶段奖励激活（5*3=15）
   - 特殊效果叠加（20）

2. 传统友人（50）
   - 理事长/记者羁绊（2*5=10）
   - 支援卡外关系（3*5=15）

### 四、训练系统（200维）
1. 训练安排（扩展50）
   - 烹饪训练位（5*3=15）
   - 锁定训练类型（5）
   - 训练材料匹配度（5*3=15）

2. 训练效果预测（150）
   - 属性增益预测（5*5=25）
   - 体力消耗预测（5*3=15）
   - 特殊效果触发率（5*5=25）

### 五、赛事系统（80维）
1. 烹饪赛事（50）
   - 历史成绩（5*5=25）
   - 材料需求匹配（5*3=15）
   - 赛事奖励预测（10）

2. 传统赛事（30）
   - 保留原有赛事编码

## 角色卡模块（6*120=720维）
1. 基础信息（扩展20）
   - 烹饪专精等级（5）
   - 食材偏好（5）
   - 菜品知识（10）

2. 关系网络（50）
   - 与其他角色协作度（5*5=25）
   - 团队技能加成（25）

3. 训练记录（50）
   - 烹饪训练参与（10）
   - 特殊训练效果（20）

## 特征编码方案
1. 数值型：min-max归一化
2. 类别型：分段编码（每5级一个区间）
3. 状态标志：multi-hot编码
4. 时序特征：循环缓冲区编码

## 优势
1. 完整保留烹饪系统状态
2. 细粒度友人关系建模
3. 增加训练效果预测模块
4. 支持多阶段赛事决策
